<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <!-- Mirrored from 127.0.0.1:64444/Documentation/UseCasesDesign by HTTrack Website Copier/3.x [XR&CO'2008], Wed, 01 Oct 2014 13:46:44 GMT -->
 <!-- Added by HTTrack -->
 <head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8">
  <!-- /Added by HTTrack -->  
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
  <title>Seam Framework - Use Cases Design </title> 
  <link class="component" href="../a4j/s/3_3_3.CR1org/richfaces/renderkit/html/css/basic_classes.xcss/DATB/eAELXT5DOhSIAQ%21sA18_.css" rel="stylesheet" type="text/css">
  <link class="component" href="../a4j/s/3_3_3.CR1org/richfaces/renderkit/html/css/extended_classes.xcss/DATB/eAELXT5DOhSIAQ%21sA18_.css" media="rich-extended-skinning" rel="stylesheet" type="text/css">
  <script src="../a4j/g/3_3_3.CR1org.ajax4jsf.javascript.AjaxScript" type="text/javascript"></script>
  <script type="text/javascript">window.RICH_FACES_EXTENDED_SKINNING_ON=true;</script>
  <script src="../a4j/g/3_3_3.CR1org/richfaces/renderkit/html/scripts/skinning.js" type="text/javascript"></script>
  <link href="../themes/sfwkorg/css/sfwk.css" rel="stylesheet" type="text/css"> 
  <link href="../themes/sfwkorg/css/shCore.css" rel="stylesheet" type="text/css"> 
  <link href="../themes/sfwkorg/css/shThemeDefault.css" rel="stylesheet" type="text/css"> 
  <script type="text/javascript" src="../seam/resource/remoting/resource/remote.js"></script> 
  <script type="text/javascript" src="../seam/resource/remoting/interface1535.js?httpSessionChecker"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/jquery.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/jqueryPlugins.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/lacewiki.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shCore.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushBash.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushCpp.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushCSharp.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushCss.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushDelphi.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushDiff.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushGroovy.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushJava.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushJScript.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushPhp.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushPlain.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushPython.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushRuby.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushScala.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushSql.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushVb.js"></script> 
  <script type="text/javascript" src="../themes/sfwkorg/js/sh/scripts/shBrushXml.js"></script> 
  <script type="text/javascript">
        /* If you really want to load the Flash garbage on every page, go ahead and enable this:
        SyntaxHighlighter.config.clipboardSwf = '/themes/sfwkorg/js/sh/scripts/clipboard.swf';
         */
        SyntaxHighlighter.defaults['gutter'] = false;
        SyntaxHighlighter.all();
	</script> 
  <script type="text/javascript">

        // ###################### Session timeout alert #################################

        var sessionChecker = Seam.Component.getInstance("httpSessionChecker");
        var timeoutURL = '/Home/JBossSeam';
        var timeoutMillis = '900'*1000+3000;
        var sessionTimeoutInterval = null;

        function startSessionTimeoutCheck() {
            sessionTimeoutInterval = setInterval('sessionChecker.isNewSession(alertTimeout)', timeoutMillis);
        }

        function stopSessionTimeoutCheck() {
            if (sessionTimeoutInterval) clearInterval(sessionTimeoutInterval);
        }

        function resetSessionTimeoutCheck() {
            if (sessionTimeoutInterval != null) {
                stopSessionTimeoutCheck();
                startSessionTimeoutCheck();
            }
        }

        function alertTimeout(newSession) {
            if (newSession) {
                clearInterval(sessionTimeoutInterval);
                jQuery(".ajaxSupport")
                        .removeAttr('onblur')
                        .removeAttr('onchange')
                        .removeAttr('onkeyup')
                        .removeAttr('onclick');
                jQuery(".sessionEventTrigger").hide();
                var answer = confirm("Your session has timed out, you will be redirected to the start page.");
                if (answer) window.location = timeoutURL;
            }
        }

        // ###################### Popups #################################

        var fadeInPopupDialog = function(hash) {
            hash.w.fadeIn('fast',function(){ hash.o.show(); });
            jQuery(".closeDialog", hash.w).attr("accesskey", "C"); // Dynamically assign accesskey to .closeDialog buttons
        };

        var fadeOutPopupDialog = function(hash) { hash.w.fadeOut('fast',function(){ hash.o.remove(); }); };

        // ###################### Tabbed Forms #################################

        var formTabErrors = {};

        function formTabRaiseError(tabId, fieldId, message) {

            formTabClearError(tabId, fieldId); // Clear error then re-add

            log("Raise error for tab: '" + tabId + "' field: " + fieldId);

            // Add an error message to the client message box
            log("Adding error message: " +tabId + fieldId + "ErrorMessage")
            jQuery("#clientMessageBoxTable").append(
                '<tr id="' + tabId + fieldId + 'ErrorMessage"><td><img src="/themes/sfwkorg/img/attention.gif" ' +
                'height="18" width="18" class="clientMessageBoxImage attentionImage"/></td>' +
                '<td><span id="attentionMessage" class="attentionMessage">'+ message + '</span></td></tr>'
            );
            if (formTabErrors[tabId] == null) {
                formTabErrors[tabId] = 1;
            } else {
                formTabErrors[tabId]++;
            }
            formTabRenderErrors(tabId);
        }

        function formTabClearError(tabId, fieldId) {
            if (document.getElementById(tabId+fieldId+"ErrorMessage") != null) { // This error is displayed
                log("Clear error for tab: '" + tabId + "' field: " + fieldId);
                log("Removing error message: " +tabId + fieldId + "ErrorMessage")
                // Remove the error message on the client message box
                jQuery("#"+tabId + fieldId + "ErrorMessage").remove();

                formTabErrors[tabId]--;
                formTabRenderErrors(tabId);
            }
        }

        function formTabRenderErrors(tabId) {
            log("Errors for tab: '" + tabId + "': " + formTabErrors[tabId]);

            if (formTabErrors[tabId] > 0 && document.getElementById(tabId+"InvalidIcon") == null) {
                log("Showing icon for tab: " + tabId);
                // Show an icon on the tab and blink it a few times
                jQuery("#"+tabId)
                    .prepend('<img id="' + tabId + 'InvalidIcon" ' +
                            'src="/themes/sfwkorg/img/attention.gif" width="13" height="13" ' +
                            'alt="!" style="vertical-align:bottom;margin-left:5px;margin-right:5px;"/>');
                pulsate("#"+tabId);
            } else if (formTabErrors[tabId] < 1){
                log("Removing icon of tab: " + tabId);
                jQuery("#"+tabId + "InvalidIcon").remove();             // Remove the error icon on the tab
            }

            var tabsHaveErrors = false;
            for (var tab in formTabErrors) {
                var numOfErrors = formTabErrors[tab];
                if (numOfErrors > 0) {
                    tabsHaveErrors = true;
                    break;
                }
            }

            if (tabsHaveErrors) {
                log("Hiding save button and showing form message box");
                jQuery(".saveButton").hide();                       // Hide save button(s)
                jQuery(".formControls").css("height", "30px");      // Adjust height for missing save button
                jQuery("#messageBoxContainer").hide();                 // Hide server messages
                jQuery("#clientMessageBoxContainer").show();           // Show client error messages
            } else {
                log("Showing save button and hiding form message box");
                jQuery(".saveButton").show();                       // Show save button(s)
                jQuery(".formControls").css("height", "");          // Readjust height for present save button
                jQuery("#clientMessageBoxContainer").hide();           // Hide client error messages
            }
        }

        function formTabClicked() {
            jQuery("#messageBoxContainer").hide();                 // Hide server messages
        }

        function log(message) {
            return; // Remove to enable logging
            if (!log.window_ || log.window_.closed) {
                var win = window.open("", null, "width=400,height=200," +
                                                "scrollbars=yes,resizable=yes,status=no," +
                                                "location=no,menubar=no,toolbar=no");
                if (!win) return;
                var doc = win.document;
                doc.write("<html><head><title>Debug Log</title></head><body style='font-family: monospace'></body></html>");
                doc.close();
                log.window_ = win;
            }
            var logLine = log.window_.document.createElement("div");
            logLine.appendChild(log.window_.document.createTextNode(message));
            log.window_.document.body.appendChild(logLine);
        }

        // ###################### Design #################################

        function highlightStars(item, range, end) {
            for (i = 1; i <= range; i++) {
                styleClass = ".item"+item+"-rate"+i;
                jQuery(styleClass).attr("src", "../themes/sfwkorg/img/star_grey.gif");
            }
            for (i = 1; i <= end; i++) {
                styleClass = ".item"+item+"-rate"+i;
                jQuery(styleClass).attr("src", "../themes/sfwkorg/img/star.gif");
            }
        }

        function pulsate(query) {
            var blinkCount = 2*2;
            do {
                jQuery(query)['fade'+(blinkCount%2==0?'Out':'In')]('fast');
            } while (--blinkCount);
        }

        function clearDocumentBackground() {
            // Noop for this skin
        }

        // Wrap boxes with border and shadow
        function wrapBoxes() {
            // Noop for this skin
        }

        function initPage() {
            checkCookieSupport();
            wrapBoxes();
        }

        jQuery(function() {
            initPage();
        });

    </script> 
  <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-25106513-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script> 
 </head> 
 <body> 
  <noscript> 
   <div class="cookieJavaScriptWarning">
     Please activate JavaScript in your browser. Without it, you will only be able to browse this website but clicking on any advanced feature (any forms or submit buttons) will not work. 
   </div> 
  </noscript>
  <div id="dialogHelp" class="popupDialog">
   <span id="dialogHelpPopup" title="dialogHelp"></span>
   <span id="dialogHelpInit"> <script type="text/javascript">
            function showHelpPopup(width, height, offsetId) {
                var offset = jQuery("#"+offsetId).offset();
                jsf('dialogHelpPopup')
                    .css({width: width+"px", height: height+"px", top: offset.top-100+"px", left: offset.left-150+"px"})
                    .jqm({
                        closeClass: "closeDialog",
                        overlay: 0
                    });

                jQuery("#dialogHelpContent").css("width", width-20+"px").css("height", height-75+"px");
                jQuery("#dialogHelpContent").css("overflow", "auto");

                jsf('dialogHelpPopup').jqmShow();
            }
        </script></span> 
   <script type="text/javascript">jQuery(function() {
        jsf('dialogHelpPopup').Resizable({
            minTop: 1,
            dragHandle: "#dialogHelpHead",
            handlers: { se: "#dialogHelpResizeHandle" }
        });
    });</script> 
   <div class="popupDialogHead" id="dialogHelpHead">
    Help
   </div>
   <div id="dialogHelpContent" class="popupDialogContent"></div>
   <div id="dialogHelpControls" class="popupDialogControls">
    <div id="j_id14" style="padding:5px;">
     <a href="#" class="buttonNonpersistent closeDialog"><span class="buttonLabel">Close Help</span></a>
    </div>
   </div>
  </div> 
  <div id="wrapper"> 
   <div id="header">  
    <div>
     <a href="http://seamframework.org/"><img src="../themes/sfwkorg/img/blank.gif" height="98" width="210"></a> 
    </div> 
   </div>
   <div id="body"> 
    <div id="container"> 
     <div id="leftColumn">
      <div id="mainMenu" xmlns="http://www.w3.org/1999/xhtml">
       <div id="j_id121" class="box">
        <div class="mainMenuContainer"> 
         <div class="mainMenuHeader"></div> 
         <div class="mainMenuBody">
          <div id="j_id125" class="level1">
           <span class="level1Marker level1MarkerDot">·</span>
           <span class="level1Marker level1MarkerGreaterThan">&gt;</span>
           <span class="level1Marker level1MarkerSlash">/</span>
           <span class="level1Marker level1MarkerSpace">&nbsp;</span>
           <a href="../Home.html" class="level1Link">Home</a>
          </div>
          <div id="j_id132" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="../Home/WhySeam.html" class="level2Link">Why Seam?</a>
          </div>
          <div id="j_id139" class="level1">
           <span class="level1Marker level1MarkerDot">·</span>
           <span class="level1Marker level1MarkerGreaterThan">&gt;</span>
           <span class="level1Marker level1MarkerSlash">/</span>
           <span class="level1Marker level1MarkerSpace">&nbsp;</span>
           <a href="../Seam2.html" class="level1Link">Seam 2</a>
          </div>
          <div id="j_id146" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="../Seam2/GettingStarted.html" class="level2Link">Getting Started</a>
          </div>
          <div id="j_id153" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="../Seam2/Downloads.html" class="level2Link">Downloads</a>
          </div>
          <div id="j_id160" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="../Seam2/Documentation.html" class="level2Link">Documentation</a>
          </div>
          <div id="j_id167" class="level1">
           <span class="level1Marker level1MarkerDot">·</span>
           <span class="level1Marker level1MarkerGreaterThan">&gt;</span>
           <span class="level1Marker level1MarkerSlash">/</span>
           <span class="level1Marker level1MarkerSpace">&nbsp;</span>
           <a href="http://weld.cdi-spec.org/" class="level1Link">Weld</a>
          </div>
          <div id="j_id174" class="level1">
           <span class="level1Marker level1MarkerDot">·</span>
           <span class="level1Marker level1MarkerGreaterThan">&gt;</span>
           <span class="level1Marker level1MarkerSlash">/</span>
           <span class="level1Marker level1MarkerSpace">&nbsp;</span>
           <a href="../Community.html" class="level1Link">Community</a>
          </div>
          <div id="j_id181" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="https://community.jboss.org/" class="level2Link">Forums</a>
          </div>
          <div id="j_id188" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="../Community/CDIExtensions.html" class="level2Link">CDI Extensions</a>
          </div>
          <div id="j_id195" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="../Community/Contribute.html" class="level2Link">Contribute</a>
          </div>
          <div id="j_id202" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="../Community/JIRA.html" class="level2Link">JIRA</a>
          </div>
          <div id="j_id209" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="../Community/MailingLists.html" class="level2Link">Mailing Lists</a>
          </div>
          <div id="j_id216" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="../Community/Events.html" class="level2Link">Events</a>
          </div>
          <div id="j_id223" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="../Community/Links.html" class="level2Link">Links</a>
          </div>
          <div id="j_id230" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="../Community/SeamInProduction.html" class="level2Link">Seam In Production</a>
          </div>
          <div id="j_id237" class="level1">
           <span class="level1Marker level1MarkerDot">·</span>
           <span class="level1Marker level1MarkerGreaterThan">&gt;</span>
           <span class="level1Marker level1MarkerSlash">/</span>
           <span class="level1Marker level1MarkerSpace">&nbsp;</span>
           <a href="../Documentation.html" class="level1Link">Documentation</a>
          </div>
          <div id="j_id244" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="FAQs.html" class="level2Link">FAQs</a>
          </div>
          <div id="j_id251" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="KnowledgeBase.html" class="level2Link">Knowledge Base</a>
          </div>
          <div id="j_id258" class="level2">
           <span class="level2Marker level2MarkerDot">·</span>
           <span class="level2Marker level2MarkerGreaterThan">&gt;</span>
           <span class="level2Marker level2MarkerSlash">/</span>
           <span class="level2Marker level2MarkerSpace">&nbsp;</span>
           <a href="Design.html" class="level2Link">Design</a>
          </div> 
         </div> 
         <div class="mainMenuFooter"></div> 
        </div>
       </div> 
      </div> 
      <br> 
      <div style="margin-top: 25px; margin-left: 15px; margin-right: 15px; "> 
       <h2>Built with Seam</h2> 
       <p> You can find the full source code for this website in the <a href="/Download.html">Seam package</a> in the directory /examples/wiki. It is licensed under the LGPL. </p> 
       <div style="text-align:center;">
        <a href="/Community/GetASeamIcon.html"><img src="../themes/sfwkorg/img/runningon_seamlogo_beige.gif" height="50" width="200"></a> 
       </div> 
      </div> 
     </div> 
     <div id="rightColumn">
      <img src="../themes/sfwkorg/img/blank.gif" height="8" width="1">
      <div id="breadcrumb" class="breadcrumb">
       <span class="breadcrumbPanel"><a href="../index.html" class="itemLink breadcrumbRoot">Site</a><span class="itemSeparator breadcrumbRoot">·</span><a href="../Documentation.html" class="itemLink">Documentation</a><span class="itemSeparatorDot itemSeparator">·</span><span class="itemSeparatorGreaterThan itemSeparator">&gt;</span><span class="itemSeparatorSlash itemSeparator">/</span><a href="KnowledgeBase.html" class="itemLink">Knowledge Base</a><span class="itemSeparatorDot itemSeparator">·</span><span class="itemSeparatorGreaterThan itemSeparator">&gt;</span><span class="itemSeparatorSlash itemSeparator">/</span><a href="DesignPatterns.html" class="itemLink">Design Patterns</a><span class="itemSeparatorDot itemSeparator">·</span><span class="itemSeparatorGreaterThan itemSeparator">&gt;</span><span class="itemSeparatorSlash itemSeparator">/</span><a href="UseCasesDesign.html" class="itemText">Use Cases Design </a></span>
      </div>
      <div id="messageBoxContainer"></div>
      <div id="clientMessageBoxContainer" style="display:none;"> 
       <div id="clientMessageBox" class="messageBox"> 
        <table id="clientMessageBoxTable" class="messageBoxTable" cellpadding="0" cellspacing="0" border="0"></table> 
        <script type="text/javascript">jQuery(function() {
                    jQuery("#clientMessageBoxContainer").css("margin-top", "10px").css("margin-bottom", "10px");
                    pulsate(".clientMessageBoxImage");
                });</script> 
       </div>
      </div> 
      <div id="documentDisplayContainer" class="box">
       <div id="documentDisplay" class="documentDisplay">
        <div id="j_id362"> 
         <h1 class="documentTitle"><a href="UseCasesDesign.html">Use Cases Design </a> </h1>
        </div>
        <p class="wikiPara"> Seam is an application framework that enables the development of <b>truly stateful</b> web applications. In order to do this, the framework provides the following features: </p> 
        <ul class="wikiUnorderedList"> 
         <li class="wikiUnorderedListItem"> <b>Transactions</b> that start in one screen and end in another ( a wizard is a typical example of a multi-page use case ).</li> 
         <li class="wikiUnorderedListItem"> <b>Domain objects</b> that get persisted in a persistence context, during the course of the use case, with ORM validators at the method and bean levels. The use case can be confirmed or cancelled in the last page, without having to explicitly delete database records or in-memory objects, and without session memory leaks.</li> 
         <li class="wikiUnorderedListItem"> When browsing between pages, the <b>framework</b> is in charge of restoring previous states, instead of the programmer.</li> 
         <li class="wikiUnorderedListItem"> Lists in drop-downs and combo boxes (to give some examples) get read <b>only once</b>, when either returning from a prevous page or reloading with F5. This is achieved by using Hibernate's first-level cache, which is not well used by stateless frameworks such as Spring.</li> 
         <li class="wikiUnorderedListItem"> Use case tests are really <b>representative</b> of the actual use case, i.e., they use the same transaction management, persistence context, first-level cache, bijection, etc.</li> 
        </ul> 
        <p class="wikiPara"> Both the official reference books for Seam, as well as those available from third parties, do not focus on how the achieve the above. While the framework does provide transaction and conversation management, the persistence context, etc, the task of hiding these details from the programmer is ours, and therefore that is what we will do next. </p> 
        <b>So many promises !!</b> 
        <p class="wikiPara"> In the following article, we will design the classes needed for the management of a single use case, with a model that will make the above problems invisible to the 'end' programmer. </p> 
        <h1 class="wikiHeadline1" id="H-OurGoal"><a href="UseCasesDesign.html#H-OurGoal">Our goal</a></h1> 
        <p class="wikiPara"> The following is the source code for a use case that will create a person, his/her relatives, and their phone numbers. We want to design a 3-page wizard: one for the person, another for the relatives, and a third one for their phone numbers. We will use EL expressions in order to make the code shorter. </p> 
        <pre class="wikiPreformatted">
invokeMethod("#{createPersonUseCase.beginUseCase}");                    (1)

setValue("#{personHome.instance.firstName}", "Anakin");
setValue("#{personHome.instance.lastName}", "Skywalker");               (2)

invokeMethod("#{personHome.persist}");                                  (3)

setValue("#{relativeHome.instance.firstName}", "Padme");
setValue("#{relativeHome.instance.lastName}", "Amidala");
setValue("#{relativeHome.instance.relation}", "wife");                  (4)

invokeMethod("#{relativeHome.persist}");                                (5)

invokeMethod("#{relativeHome.instance.clearInstance}");	
setValue("#{relativeHome.instance.firstName}", "Luke");
setValue("#{relativeHome.instance.lastName}", "Skywalker");
setValue("#{relativeHome.instance.relation}", "son");                   (6)

invokeMethod("#{relativeHome.persist}");                                (7)

setValue("#{phoneHome.instance.number}", "555-1111");
invokeMethod("#{phoneHome.persist}");                                   (8)

invokeMethod("#{phoneHome.clearInstance}");
setValue("#{phoneHome.instance.number}", "555-1234");
invokeMethod("#{phoneHome.persist}");                                   (9)

invokeMethod("#{createPersonUseCase.finishUseCase}");                   (10)
</pre> 
        <h1 class="wikiHeadline1" id="H-TheJoysOfSeam"><a href="UseCasesDesign.html#H-TheJoysOfSeam">The joys of Seam</a></h1> 
        <p class="wikiPara"> Like it can be seen in the previous code snippet, there are no explicit references to transactions, contexts, <b>conversations</b>, persistence, etc. Everything is hidden from the developer. Here is the step-by-step detail of the tasks done by Seam in the example code: </p> 
        <ol class="wikiOrderedList"> 
         <li class="wikiOrderedListItem"> The component <i class="wikiEmphasis">createPersonUseCase</i> gets instantiated, Seam starts a <b>long conversation</b>, a transaction starts in the persistence context of an ORM supporting FlushMode <b>MANUAL</b>, and the method <i class="wikiEmphasis">beginUseCase()</i> gets called. Control is now given to the developer, who can perform a custom initialization of the use case if he so wishes.</li> 
         <li class="wikiOrderedListItem"> An <b>EntityHome</b> called <i class="wikiEmphasis">personHome</i> is created. This home object creates a domain object ( Person ), which is returned by the method <i class="wikiEmphasis">getInstance()</i>, in order to be initialized with the example first and last names.</li> 
         <li class="wikiOrderedListItem"> The home object <i class="wikiEmphasis">personHome</i> persists the instance of the domain object ( Person ), though not in the database, but in the <b>ORM's persistence context</b> instead ( since the transaction was started by the persistence context and not by the <b>RDBMS</b> )</li> 
         <li class="wikiOrderedListItem"> An <b>EntityHome</b> called <i class="wikiEmphasis">relativeHome</i> is instantiated. This home object creates a domain object ( Relative ). Internally during its creation, this home gets the <i class="wikiEmphasis">personHome</i> object via injection from Seam's context ( or more precisely, Seam's metacontainer ).</li> 
         <li class="wikiOrderedListItem"> The home object <i class="wikiEmphasis">relativeHome</i> persists the instance of the domain object ( Relative ). The transaction is still ongoing...</li> 
         <li class="wikiOrderedListItem"> Object <i class="wikiEmphasis">relativeHome</i> gets reused, but first there is a call to method <i class="wikiEmphasis">clearInstance()</i>, in order to tell a new instance of Relative must be created. Again, the home object receives an instance of the Person object to be assigned to the Relative. </li> 
         <li class="wikiOrderedListItem"> The new Relative gets persisted in the <b>ORM's persistence context</b>.</li> 
         <li class="wikiOrderedListItem"> The home object <i class="wikiEmphasis">phoneHome</i> is created, which in turn it persists the Phone domain object.</li> 
         <li class="wikiOrderedListItem"> Again, we clear the instance in <i class="wikiEmphasis">phoneHome</i> with <i class="wikiEmphasis">clearInstance()</i> and repeat the step for the other Phone.</li> 
         <li class="wikiOrderedListItem"> The <b>database transaction</b> starts and ends, dumping in it all the domain objects kept in the <b>ORM's persistence context</b>. Then all the <b>EntityHome</b> objects in the current conversation are deleted from memory, and finally the conversation itself is deleted.</li> 
        </ol> 
        <h2 class="wikiHeadline2" id="H-DetailOfStep1"><a href="UseCasesDesign.html#H-DetailOfStep1">Detail of step (1)</a></h2> 
        <p class="wikiPara"> <img src="../service/File/82938.jpg" width="697" height="683"> </p> 
        <ol class="wikiOrderedList"> 
         <li class="wikiOrderedListItem"> Use Case start request.</li> 
         <li class="wikiOrderedListItem"> A new Conversational Context is linked to the Use Case.</li> 
         <li class="wikiOrderedListItem"> New instance of object <i class="wikiEmphasis">createPersonUseCase</i>, within the Conversational Context.</li> 
         <li class="wikiOrderedListItem"> Creation of the <b>ORM's Persistence Context</b>.</li> 
         <li class="wikiOrderedListItem"> A new <b>Transaction</b>, linked to the ORM's Persistence Context, is started from object <i class="wikiEmphasis">createPersonUseCase</i>.</li> 
        </ol> 
        <h2 class="wikiHeadline2" id="H-DetailOfStep2"><a href="UseCasesDesign.html#H-DetailOfStep2">Detail of step (2)</a></h2> 
        <p class="wikiPara"> <img src="../service/File/82939.jpg" width="697" height="465"> </p> 
        <ol class="wikiOrderedList"> 
         <li class="wikiOrderedListItem"> Creation of an object <i class="wikiEmphasis">personHome</i> of type <b>EntityHome</b>, which will instantiate a domain object called person. Both will be kept in the Conversational Context. </li> 
        </ol> 
        <h2 class="wikiHeadline2" id="H-DetailOfStep3"><a href="UseCasesDesign.html#H-DetailOfStep3">Detail of step (3)</a></h2> 
        <p class="wikiPara"> <img src="../service/File/82940.jpg" width="697" height="465"> </p> 
        <ol class="wikiOrderedList"> 
         <li class="wikiOrderedListItem"> Object <i class="wikiEmphasis">personHome</i> persists the domain object person in the ORM's Persistence Context</li> 
        </ol> 
        <h2 class="wikiHeadline2" id="H-DetailOfStep4"><a href="UseCasesDesign.html#H-DetailOfStep4">Detail of step (4)</a></h2> 
        <p class="wikiPara"> <img src="../service/File/82941.jpg" width="697" height="465"> </p> 
        <ol class="wikiOrderedList"> 
         <li class="wikiOrderedListItem"> A new instance of type <b>EntityHome</b> called <i class="wikiEmphasis">relativeHome</i> is created. This home contains the domain object relative, in transient state. The relative object gets created with a reference to person, already in the <b>ORM's Persistence Context</b></li> 
        </ol> 
        <h2 class="wikiHeadline2" id="H-DetailOfStep5"><a href="UseCasesDesign.html#H-DetailOfStep5">Detail of step (5)</a></h2> 
        <p class="wikiPara"> <img src="../service/File/82942.jpg" width="697" height="465"> </p> 
        <ol class="wikiOrderedList"> 
         <li class="wikiOrderedListItem"> Object <i class="wikiEmphasis">relativeHome</i> persists its domain object relative in the ORM's Persistence Context. The transaction has not been persisted by the RDBMS yet. </li> 
        </ol> 
        <h2 class="wikiHeadline2" id="H-DetailOfStep6"><a href="UseCasesDesign.html#H-DetailOfStep6">Detail of step (6)</a></h2> 
        <p class="wikiPara"> <img src="../service/File/82943.jpg" width="697" height="465"> </p> 
        <ol class="wikiOrderedList"> 
         <li class="wikiOrderedListItem"> Object <i class="wikiEmphasis">relativeHome</i> is reused, but first the method <i class="wikiEmphasis">clearInstance()</i> is called to indicate a new instance of type Relative (also called relative in this example) must be created. Again, the instance person is received and assigned to the new relative.</li> 
        </ol> 
        <h2 class="wikiHeadline2" id="H-DetailOfStep7"><a href="UseCasesDesign.html#H-DetailOfStep7">Detail of step (7)</a></h2> 
        <p class="wikiPara"> <img src="../service/File/82944.jpg" width="697" height="465"> </p> 
        <ol class="wikiOrderedList"> 
         <li class="wikiOrderedListItem"> The new <i class="wikiEmphasis">relative</i> is persisted in the ORM's Persistence Context. As the diagram shows, the relationships between domain objects are preserved.</li> 
        </ol> 
        <h2 class="wikiHeadline2" id="H-DetailOfStep10"><a href="UseCasesDesign.html#H-DetailOfStep10">Detail of step (10)</a></h2> 
        <p class="wikiPara"> <img src="../service/File/82945.jpg" width="697" height="717"> </p> 
        <ol class="wikiOrderedList"> 
         <li class="wikiOrderedListItem"> The <b>database transaction</b> is started and ended by the <b>RDBMS</b>, persisting all domain objects kept in the ORM's Persistence Context.</li> 
         <li class="wikiOrderedListItem"> All objects in the Conversational Context ( <i class="wikiEmphasis">createPersonUseCase</i>, <i class="wikiEmphasis">relativeHome</i>, <i class="wikiEmphasis">personHome</i>, and the <b>Persistence Context</b> of the ORM ) get deleted, and finally the <b>Conversational Context</b> itself is deleted.</li> 
        </ol> 
        <h2 class="wikiHeadline2" id="H-TheIcingOnTheCake"><a href="UseCasesDesign.html#H-TheIcingOnTheCake">The icing on the cake</a></h2> 
        <p class="wikiPara"> With the architecture already defined, we will now show the source code for the classes used in the previous example. We will start with the class for component <i class="wikiEmphasis">createPersonUseCase</i>: </p> 
        <pre class="wikiPreformatted">
package com.test.seam.usecases;

@Name("abstractCreatePersonUseCase")
@Scope(ScopeType.CONVERSATION)
@Conversational
public class CreatePersonUseCase extends UseCase implements Serializable {

	private static final long serialVersionUID = 8270494158481079247L;

}
</pre> 
        <p class="wikiPara"> The functionality to create and end the transaction, the conversation, etc, is encapsulated in the <i class="wikiEmphasis">UseCase</i> superclass. Therefore, if the use case does not require special start and end requirements, it is complete. </p> 
        <p class="wikiPara"> So far, the actual code the developer needs to write is minimal. Let's continue with the Home objects, starting with <i class="wikiEmphasis">personHome</i>: </p> 
        <pre class="wikiPreformatted">
package com.test.homes;

@Name("personHome")
@Scope(ScopeType.CONVERSATION)
@Conversational
public class PersonHome extends EntityHome&lt;Person&gt;  implements Serializable {

	private static final long serialVersionUID = -505760018509003694L;

}
</pre> 
        <p class="wikiPara"> Done! The persistence functionality is implemented in the superclass provided by Seam. We specify <b>&lt;Person&gt;</b> in order to indicate the type of domain object wrapped by the Home. Let's proceed with the class for <i class="wikiEmphasis">relativeHome</i>: </p> 
        <pre class="wikiPreformatted">
package com.test.homes;

@Name("relativeHome")
@Scope(ScopeType.CONVERSATION)
@Conversational
public class RelativeHome extends EntityHome&lt;Relative&gt; implements Serializable {

	private static final long serialVersionUID = -505760018509003694L;

	@In
	PersonHome personHome;
	
	/* (non-Javadoc)
	 * @see org.jboss.seam.framework.Home#createInstance()
	 */
	protected Relative createInstance() {
		Relative relative=new Relative();
		relative.setPerson(personHome.getInstance());
		return relative;
	}
}
</pre> 
        <p class="wikiPara"> As we can see, the <i class="wikiEmphasis">personHome</i> is injected into this <b>EntityHome</b>, and is then used to obtain and assign the person instance during the creation of the domain object relative. No further coding is necessary. </p> 
        <p class="wikiPara"> The code for <i class="wikiEmphasis">phoneHome</i> is identical to the above example, except changing the word relative for phone. </p> 
        <p class="wikiPara"> Since class <i class="wikiEmphasis">CreatePersonUseCase</i> is <b>conversational</b>, it requires an existing long conversation in order to be instantiated by Seam's metacontainer. We define a factory tasked with the instantiation and ejection of the conversation, using the <i class="wikiEmphasis">UseCaseManager</i>. </p> 
        <pre class="wikiPreformatted">
package com.test.seam.usecases;

@Name("createPersonUseCaseFactory")
public class CreatePersonUseCaseFactory implements Serializable {
	
	@Factory(value="createPersonUseCase",scope=ScopeType.CONVERSATION)
	public CreatePersonUseCase getCreatePersonUseCase() {
		return new UseCaseManager&lt;CreatePersonUseCase&gt;().createUseCase(CreatePersonUseCase.class);
	}
}
</pre> 
        <p class="wikiPara"> As can be seen, the factory ejects component <i class="wikiEmphasis">createPersonUseCase</i> into the metacontainer. </p> 
        <p class="wikiPara"> That's it. Our hypothetical programmer does not need to write any additional code in order to have a complete use case (with the exception, of course, of coding the domain objects Person, Relative and Phone, which are all very simple). </p> 
        <h1 class="wikiHeadline1" id="H-BeyondTheMatrix"><a href="UseCasesDesign.html#H-BeyondTheMatrix">Beyond the Matrix...</a></h1> 
        <p class="wikiPara"> How did we manage to hide the functionality needed for the use case to work? The following is the code for the <i class="wikiEmphasis">UseCaseManager</i>, which should never be seen by our programmer: </p> 
        <pre class="wikiPreformatted">
package com.test.seam.usecases;

public class UseCaseManager&lt;E extends UseCase&gt; implements Serializable {

	private static final long serialVersionUID = -4291304878869343425L;
	
	public E createUseCase(Class&lt;E&gt; useCase) {
		Conversation.instance().begin();
		Conversation.instance().changeFlushMode(FlushModeType.MANUAL);
		E e=(E)Component.getInstance(useCase,true);
		return e;
	}
}
</pre> 
        <p class="wikiPara"> Method <i class="wikiEmphasis">createUseCase</i> is in charge of creating the conversation, telling the corresponding ORM that the FlushMode will be <b>MANUAL</b>, and instantiating the Seam component ( in our case, <i class="wikiEmphasis">CreatePersonUseCase</i> ). </p> 
        <p class="wikiPara"> Finally, here is our object <i class="wikiEmphasis">UseCase</i> as the icing on the cake: </p> 
        <pre class="wikiPreformatted">
package com.test.seam.usecases;

public abstract class UseCase implements Serializable {

	private EntityManager entityManager;

	public String beginUseCase() {
		entityManager= (EntityManager) Component.getInstance("entityManager");
		return Constants.SUCCESS;
	}

	public String finishUseCase() {
		entityManager.flush();
		Conversation.instance().end();
		return Constants.SUCCESS;
	}

	public String cancelUseCase() {
		entityManager.clear();
		Conversation.instance().end();
		return Constants.SUCCESS;
	}
}
</pre> 
        <p class="wikiPara"> The only caveat of this class is that we must access the ORM's EntityManager in order to confirm the end of the transaction, either by sending the persistence context to the database with <i class="wikiEmphasis">flush()</i> or by cleaning it with <i class="wikiEmphasis">clear()</i>, and then marking the end of the conversation so that all the <b>EntityHomes</b> and <i class="wikiEmphasis">UseCases</i> are deleted. </p> 
       </div>
       <div id="j_id374" class="documentCreatorHistory undecoratedLink smallFont">
        <div id="j_id375">
          Created:&nbsp;20. Jun 2009, 22:24&nbsp;America/New_York&nbsp;(Maximiliano Carrizo)
        </div>
        <div id="j_id383">
          Last Modified:&nbsp;20. Jun 2009, 23:58&nbsp;America/New_York&nbsp;(Maximiliano Carrizo)
        </div>
       </div> 
      </div>
      <div id="commentDisplayForm">
       <div id="comments" class="commentsDisplay"></div>
      </div> 
     </div> 
     <div class="clear" style="padding-top:15px;"></div> 
    </div>
   </div> 
  </div> 
  <div id="footer" class="undecoratedLink"> 
   <p> © Copyright 2009, Red Hat Middleware, LLC. All rights reserved. JBoss and Seam are registered trademarks and servicemarks of <a href="http://www.redhat.com/">Red Hat, Inc</a>. [<a href="http://www.redhat.com/legal/privacy_statement.html">Privacy Policy</a>]</p> 
  </div>
  <div id="status">
   <span id="globalStatus"><span id="globalStatus.start" style="display: none">
     <div id="j_id608" class="statusStart">
      <img src="../themes/sfwkorg/img/statusindicator.gif" height="25" width="20">
     </div></span><span id="globalStatus.stop">
     <div id="j_id610" class="statusStop">
      <img src="../themes/sfwkorg/img/blank.gif" height="25" width="20">
     </div></span></span>
  </div>  
  <!-- Mirrored from 127.0.0.1:64444/Documentation/UseCasesDesign by HTTrack Website Copier/3.x [XR&CO'2008], Wed, 01 Oct 2014 13:47:01 GMT --> 
  <!-- Added by HTTrack -->
  <meta http-equiv="content-type" content="text/html;charset=UTF-8">
  <!-- /Added by HTTrack --> 
 </body>
</html>